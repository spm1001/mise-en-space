{"id":"mise-02b","title":"Integration test with real account","description":"End-to-end test: search → fetch → read file. Uses test fixtures from V2.md.","design":"## Test Fixtures (from EXPERIMENTS.md)\n\n| Fixture | ID | Description |\n|---------|-----|-------------|\n| Doc: Simple | 1w8KcJtwlHcWn3HLlp9QVMQzmfVegW0lhVOd8K8kuLig | ROUNDTRIP_TEST |\n| Doc: Multi-tab | 1vqkOoNbPuc1MNolYZRhKvBONGZrrIopAb7bzYzn5x0k | Team Handbook |\n| Sheets | 1Hf2smDVDjBlxaZuGZvAJML5XmdFM-sPZW3xkCRfUfLY | Team meeting |\n| Gmail: Long thread | 194ac68f6091de54 | 72 messages |\n\n## Test Cases\n\n1. search(\"budget\") → returns Drive + Gmail results\n2. fetch(doc_id) → writes markdown, returns path\n3. fetch(sheet_id) → writes CSV, returns path\n4. fetch(thread_id) → writes cleaned text, returns path\n5. Read returned path → content is valid\n\n## Acceptance Criteria\n\n- [ ] All fixture types tested\n- [ ] Paths exist and readable\n- [ ] Content is valid markdown/CSV/text\n- [ ] No inline content in MCP response","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:25:46.343318Z","created_by":"spm1001","updated_at":"2026-01-23T07:25:46.343318Z","dependencies":[{"issue_id":"mise-02b","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.972905Z","created_by":"spm1001"},{"issue_id":"mise-02b","depends_on_id":"mise-e0e","type":"blocks","created_at":"2026-01-23T07:26:19.898957Z","created_by":"spm1001"},{"issue_id":"mise-02b","depends_on_id":"mise-jvz","type":"blocks","created_at":"2026-01-23T07:26:19.979692Z","created_by":"spm1001"}]}
{"id":"mise-138","title":"Push to GitHub as mise-en-space","description":"Create GitHub repo, push initial scaffold. Currently local-only.","status":"tombstone","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-20T22:10:42.331554Z","created_by":"spm1001","updated_at":"2026-01-23T07:23:48.842511Z","deleted_at":"2026-01-23T07:23:48.842511Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mise-2bl","title":"Port slides extractor","description":"Port slides.py extraction (658 lines). Structured text + speaker notes, visual flags.","design":"## What to Port\n\nFrom v1 tools/slides.py:\n- Text extraction per slide\n- Speaker notes\n- Visual flags: [CHART], [IMAGE], [CONNECTOR], [SHAPE]\n- Detection: single_large_image, fragmented_text\n\n## NOT Porting (for now)\n\n- Thumbnail generation (~1s per thumbnail, bottleneck)\n- Can add later if needed\n- **When added: thumbnails MUST use batch API** — `new_batch_http_request()` for selected slides, not per-slide calls\n\n## Signature\n\nextract_slides(presentation_response: dict) -\u003e str\n\n## Acceptance Criteria\n\n- [ ] extractors/slides.py exists\n- [ ] Text + speaker notes extracted\n- [ ] Visual flags present\n- [ ] No thumbnail dependency\n- [ ] Unit test with fixture passes","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:35.46529Z","created_by":"spm1001","updated_at":"2026-01-23T12:11:13.510647Z","dependencies":[{"issue_id":"mise-2bl","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.317809Z","created_by":"spm1001"}]}
{"id":"mise-356","title":"Port docs extractor","description":"Port docs.py extraction logic (661 lines). Handles multi-tab, footnotes, link merging.","design":"## What to Port\n\nFrom v1 tools/docs.py:\n- Multi-tab document handling\n- Footnote extraction\n- Hyperlink merging (adjacent runs)\n- Heading/list hierarchy\n- Table extraction\n\n## Signature\n\nextract_doc(doc_response: dict) -\u003e str\n\nInput: Raw Docs API documents.get() response\nOutput: Markdown string\n\n## Acceptance Criteria\n\n- [ ] extractors/docs.py exists\n- [ ] Handles multi-tab with === Tab: Name === separators\n- [ ] Preserves footnotes, links, tables\n- [ ] Unit test with fixture passes","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:20.419125Z","created_by":"spm1001","updated_at":"2026-01-23T07:24:20.419125Z","dependencies":[{"issue_id":"mise-356","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.11587Z","created_by":"spm1001"}]}
{"id":"mise-3ab","title":"Wire create tool","description":"Create Google Doc/Sheet/Slides from markdown. Secondary priority.","design":"## Signature\n\ncreate(content: str, title: str, doc_type: str = 'doc', folder_id: str = None) -\u003e dict\n\n## Response Shape\n\n{\n  \"file_id\": \"...\",\n  \"url\": \"https://docs.google.com/...\"\n}\n\n## Approach\n\nUse Drive API with text/markdown mimeType:\n- files.create with text/markdown → auto-converts to Google Doc\n- This was discovered via about.get (not in static docs)\n\n## Acceptance Criteria\n\n- [ ] Creates Google Doc from markdown\n- [ ] Returns file_id and URL\n- [ ] Optional folder_id works","status":"open","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:25:22.84022Z","created_by":"spm1001","updated_at":"2026-01-23T07:25:22.84022Z","dependencies":[{"issue_id":"mise-3ab","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.781049Z","created_by":"spm1001"},{"issue_id":"mise-3ab","depends_on_id":"mise-g9i","type":"blocks","created_at":"2026-01-23T07:26:19.814894Z","created_by":"spm1001"}]}
{"id":"mise-52d","title":"mise-en-space MVP — search + fetch that works","description":"Opinionated Google Workspace MCP with 4 verbs: search, fetch, create, help. Filesystem-first, token-efficient, ergonomic for Claude.","design":"## Core Opinions\n\n1. **4 verbs** — search, fetch, create, help (not 17 tools)\n2. **Filesystem-first** — fetch returns path, Claude reads with standard tools\n3. **Auto-detect IDs** — Gmail/Drive IDs detected, URLs converted\n4. **Always LLM-analysis** — no purpose parameter, always markdown/CSV\n5. **Internal batching** — Gmail batch API under the hood\n6. **Pre-exfil detection** — check \"Email Attachments\" folder first\n\n## Architecture\n\n```\nextractors/   Pure functions (API response → content)\nadapters/     Thin Google API wrappers\ntools/        MCP tool definitions\nworkspace/    File deposit management\n```\n\n## Acceptance Criteria\n\n- [ ] search(query, sources) returns metadata for Drive + Gmail\n- [ ] fetch(id) deposits file, returns path\n- [ ] create(content, title) makes Google Doc from markdown\n- [ ] help() self-documents\n- [ ] Pre-exfiltrated attachments detected and used\n- [ ] Can replace v1 in claude.json","status":"open","priority":1,"issue_type":"epic","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:03.211479Z","created_by":"spm1001","updated_at":"2026-01-23T07:24:03.211479Z"}
{"id":"mise-52d.1","title":"Test retry decorator","description":"Zero coverage on core infrastructure. Write tests for _get_http_status, _should_retry, _convert_to_mise_error, and the decorator itself with both sync and async functions.","status":"open","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T09:03:34.812391Z","created_by":"spm1001","updated_at":"2026-01-23T09:03:34.812391Z","dependencies":[{"issue_id":"mise-52d.1","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T09:03:34.813148Z","created_by":"spm1001"}]}
{"id":"mise-52d.2","title":"Add Makefile with check target","description":"make check runs pytest + mypy in one command. Consolidates quality gates.","status":"open","priority":3,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T09:03:46.345057Z","created_by":"spm1001","updated_at":"2026-01-23T09:03:46.345057Z","dependencies":[{"issue_id":"mise-52d.2","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T09:03:46.345658Z","created_by":"spm1001"}]}
{"id":"mise-6bo","title":"Workspace manager — file deposit","description":"Manages ~/.mcp-workspace/ folder structure. Creates paths, cleans temp, returns paths.","design":"## Structure\n\n~/.mcp-workspace/\n├── [account@domain.com]/\n│   ├── drive/{fileId}.md\n│   ├── gmail/{threadId}.txt\n│   └── attachments/\n└── temp/  (auto-cleanup on startup)\n\n## Functions\n\nworkspace/manager.py:\n- get_account_folder(account) -\u003e Path\n- get_file_path(account, source, id, ext) -\u003e Path\n- write_content(path, content) -\u003e Path\n- cleanup_temp()\n- init() — called on server start\n\n## Acceptance Criteria\n\n- [ ] Creates folder structure on first use\n- [ ] Returns paths (never content)\n- [ ] Cleans temp/ on startup\n- [ ] Handles multiple accounts (future-proof)","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:52.622867Z","created_by":"spm1001","updated_at":"2026-01-23T07:24:52.622867Z","dependencies":[{"issue_id":"mise-6bo","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.503264Z","created_by":"spm1001"}]}
{"id":"mise-br7","title":"Replace v1 in claude.json","description":"Swap mcp-google-workspace for mise-en-space in Claude config. Final ship step.","design":"## Steps\n\n1. Update ~/.claude.json mcpServers entry\n2. Point to mise-en-space server.py\n3. Test with real Claude session\n4. Verify search + fetch workflow works\n\n## Rollback\n\nKeep v1 config commented, easy to revert if issues.\n\n## Acceptance Criteria\n\n- [ ] mise-en-space registered in claude.json\n- [ ] Claude can call search, fetch, create, help\n- [ ] Real workflow tested (find doc, fetch, read)","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:25:54.786555Z","created_by":"spm1001","updated_at":"2026-01-23T07:25:54.786555Z","dependencies":[{"issue_id":"mise-br7","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:07.063273Z","created_by":"spm1001"},{"issue_id":"mise-br7","depends_on_id":"mise-02b","type":"blocks","created_at":"2026-01-23T07:26:20.063198Z","created_by":"spm1001"}]}
{"id":"mise-chf","title":"Port sheets extractor — prove the pattern","description":"Simplest extractor (138 lines). Port to pure function to validate architecture.","design":"## Why First\n\n- 138 lines, single function\n- Clear input → output\n- If this works, others follow same pattern\n\n## Porting Steps\n\n1. Copy extraction logic from v1 tools/sheets.py\n2. Remove get_sheets_service() call\n3. Change signature: extract_sheets(response: dict) -\u003e str\n4. Add type hints\n5. Write unit test with fixture\n\n## Acceptance Criteria\n\n- [ ] extractors/sheets.py exists with pure function\n- [ ] Unit test with mocked API response passes\n- [ ] No imports from adapters or tools","notes":"COMPLETED: Pure function extract_sheets_content() with typed SpreadsheetData input. 13 unit tests covering CSV escaping edge cases. Architecture test enforces no adapter/tool imports. Used to validate the extractor pattern before porting docs/gmail/slides.","status":"closed","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:11.833893Z","created_by":"spm1001","updated_at":"2026-01-23T09:02:58.595204Z","closed_at":"2026-01-23T07:34:27.980862Z","close_reason":"Ported sheets extractor: pure function extract_sheets_content() with CSV escaping, 13 unit tests passing, no adapter/tool coupling","dependencies":[{"issue_id":"mise-chf","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.017733Z","created_by":"spm1001"}]}
{"id":"mise-da6","title":"Fix sheets adapter to use batchGet","description":"Current sheets adapter makes N+1 API calls (1 metadata + N tabs). Should use values().batchGet() to fetch all tabs in one call.","design":"## Current (N+1 calls)\n\n```python\nfor sheet_name in sheet_names:\n    values_response = service.spreadsheets().values().get(\n        spreadsheetId=spreadsheet_id,\n        range=f\"'{sheet_name}'\",\n    ).execute()\n```\n\n## Should Be (2 calls)\n\n```python\nranges = [f\"'{name}'\" for name in sheet_names]\nbatch_response = service.spreadsheets().values().batchGet(\n    spreadsheetId=spreadsheet_id,\n    ranges=ranges,\n    valueRenderOption=\"FORMATTED_VALUE\",\n).execute()\n```\n\n## Acceptance Criteria\n\n- [ ] Uses batchGet instead of per-tab get\n- [ ] Integration test still passes\n- [ ] Quota usage reduced (verify with rate limit test)","status":"closed","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T12:11:05.193664Z","created_by":"spm1001","updated_at":"2026-01-23T12:12:01.497189Z","closed_at":"2026-01-23T12:12:01.497189Z","close_reason":"Fixed immediately - switched to batchGet in same session"}
{"id":"mise-e0e","title":"Wire search tool","description":"Unified search across Drive + Gmail. Returns metadata only, no files written.","design":"## Signature\n\nsearch(query: str, sources: list[str] = ['drive', 'gmail'], max_results: int = 20) -\u003e dict\n\n## Response Shape\n\n{\n  \"drive_results\": [\n    {\"id\": \"...\", \"name\": \"...\", \"mimeType\": \"...\", \"modified\": \"...\", \"url\": \"...\"}\n  ],\n  \"gmail_results\": [\n    {\"thread_id\": \"...\", \"subject\": \"...\", \"snippet\": \"...\", \"date\": \"...\", \"from\": \"...\"}\n  ]\n}\n\n## Key Behaviors\n\n- Separate lists per source (not merged)\n- Drive: fullText match IS the triage (no snippets needed)\n- Gmail: snippet from API\n- Includes exfiltrated attachments (they're in Drive)\n- Contacts deferred for now\n\n## URL Handling\n\nAccept Gmail URLs, convert to thread ID:\nhttps://mail.google.com/mail/u/0/#inbox/18f4a... → thread_id\n\n## Acceptance Criteria\n\n- [ ] Searches Drive and Gmail in parallel\n- [ ] Returns separate result lists\n- [ ] Handles Gmail URLs\n- [ ] max_results works per source","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:25:02.686984Z","created_by":"spm1001","updated_at":"2026-01-23T07:25:02.686984Z","dependencies":[{"issue_id":"mise-e0e","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.59552Z","created_by":"spm1001"},{"issue_id":"mise-e0e","depends_on_id":"mise-g9i","type":"blocks","created_at":"2026-01-23T07:26:19.242041Z","created_by":"spm1001"}]}
{"id":"mise-e5o","title":"Create pre-exfil test fixture","description":"Email with attachment that's been exfiltrated to Drive. Needed to test pre-exfil detection.","design":"## What's Needed\n\n1. Find an email with attachment in user's Gmail\n2. Verify the attachment exists in \"Email Attachments\" folder\n3. Note: email thread ID, attachment filename, Drive file ID\n4. Add to EXPERIMENTS.md fixtures table\n\n## Test Case\n\nfetch(attachment_id) should:\n1. Detect pre-exfiltrated version exists\n2. Fetch from Drive (not Gmail)\n3. Return path to Drive-sourced file","status":"open","priority":3,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:30:06.326602Z","created_by":"spm1001","updated_at":"2026-01-23T07:30:06.326602Z","dependencies":[{"issue_id":"mise-e5o","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:30:15.885771Z","created_by":"spm1001"}]}
{"id":"mise-g9i","title":"Wire adapters — Google API wrappers","description":"Thin wrappers that call Google APIs and pass responses to extractors. Thread-safe.","design":"## Pattern\n\nFrom V2.md research:\n- Use requestBuilder pattern for thread safety\n- Always use fields parameter for partial responses\n- **BATCH API CALLS** — whenever making multiple calls of the same type, batch them\n\n## Batching Requirements (MANDATORY)\n\n| Adapter | What to batch | How |\n|---------|---------------|-----|\n| sheets | Multiple tabs | `values().batchGet(ranges=[...])` |\n| gmail | Multiple messages in thread | `new_batch_http_request()` |\n| slides | Selected thumbnail fetches | `new_batch_http_request()` |\n| drive | Multiple file metadata | `new_batch_http_request()` |\n| docs | Inline image fetches | `new_batch_http_request()` if multiple |\n\n## Adapters Needed\n\nadapters/drive.py:\n- get_file_metadata(file_id)\n- export_file(file_id, mime_type) \n- search_files(query, max_results)\n\nadapters/gmail.py:\n- get_thread(thread_id) — batch fetches all messages\n- get_message(message_id)\n- search_threads(query, max_results)\n\nadapters/docs.py:\n- get_document(doc_id)\n\nadapters/sheets.py:\n- get_spreadsheet(spreadsheet_id) — uses batchGet for tabs\n\nadapters/slides.py:\n- get_presentation(presentation_id)\n- get_thumbnails(presentation_id, slide_ids) — batched\n\n## Acceptance Criteria\n\n- [ ] All adapters use fields parameter\n- [ ] All adapters use batch APIs where applicable (see table above)\n- [ ] Gmail uses batch endpoint internally\n- [ ] Sheets uses batchGet for multiple tabs\n- [ ] Thread-safe (requestBuilder pattern)\n- [ ] Integration test with real API passes","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:44.671222Z","created_by":"spm1001","updated_at":"2026-01-23T12:10:37.775058Z","dependencies":[{"issue_id":"mise-g9i","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.41232Z","created_by":"spm1001"}]}
{"id":"mise-g9i.1","title":"Write sheets adapter","description":"First real adapter. Calls Sheets API, assembles SpreadsheetData, proves end-to-end pattern. Use @with_retry decorator. Follow search_/fetch_/create_ naming.","status":"closed","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T09:03:40.499314Z","created_by":"spm1001","updated_at":"2026-01-23T11:35:00.401404Z","closed_at":"2026-01-23T11:35:00.401404Z","close_reason":"Sheets adapter working: fetch_spreadsheet calls API, assembles SpreadsheetData, passes integration tests (3/4, 4th hit rate limit). Retry decorator and error conversion also verified.","dependencies":[{"issue_id":"mise-g9i.1","depends_on_id":"mise-g9i","type":"parent-child","created_at":"2026-01-23T09:03:40.500194Z","created_by":"spm1001"}]}
{"id":"mise-jvz","title":"Wire fetch tool — with pre-exfil detection","description":"Fetch content to filesystem. Auto-detects ID type, checks for pre-exfiltrated attachments.","design":"## Signature\n\nfetch(id: str) -\u003e dict\n\n## Response Shape\n\n{\n  \"path\": \"~/.mcp-workspace/account/drive/abc123.md\",\n  \"format\": \"markdown\",\n  \"metadata\": {\"title\": \"...\", \"mimeType\": \"...\", \"modified\": \"...\"}\n}\n\n## ID Auto-Detection\n\n1. If looks like Gmail URL → extract thread ID\n2. If looks like Drive URL → extract file ID\n3. If hex-ish (194ac68f...) → Gmail thread/message\n4. Otherwise → Drive file ID\n\n## Pre-Exfiltration Detection\n\nBefore downloading Gmail attachment:\n1. Check \"Email Attachments\" folder for matching file\n2. Match by: filename + size + approximate date\n3. If found → fetch from Drive (already indexed, searchable)\n4. If not → download from Gmail (3x faster than Drive for same binary)\n\n## Routing by Type\n\n- Google Doc → docs extractor → markdown\n- Google Sheet → sheets extractor → CSV  \n- Google Slides → slides extractor → structured text\n- Gmail thread → gmail extractor → cleaned text\n- PDF → markitdown → markdown\n- Office → Drive conversion → appropriate extractor\n- Binary → download to workspace, return path\n\n## Acceptance Criteria\n\n- [ ] Auto-detects ID type\n- [ ] Handles Gmail URLs\n- [ ] Checks pre-exfil folder before Gmail download\n- [ ] Routes to correct extractor\n- [ ] Returns path, not content\n\n## URL Handling (REQUIRED)\n\nAccept Gmail URLs and convert to thread ID:\n- https://mail.google.com/mail/u/0/#inbox/18f4a... → extract thread_id\n- Port the URL extraction logic from v1 validation.py\n","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:25:15.084528Z","created_by":"spm1001","updated_at":"2026-01-23T07:29:57.208244Z","dependencies":[{"issue_id":"mise-jvz","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.688019Z","created_by":"spm1001"},{"issue_id":"mise-jvz","depends_on_id":"mise-g9i","type":"blocks","created_at":"2026-01-23T07:26:19.325008Z","created_by":"spm1001"},{"issue_id":"mise-jvz","depends_on_id":"mise-6bo","type":"blocks","created_at":"2026-01-23T07:26:19.405759Z","created_by":"spm1001"},{"issue_id":"mise-jvz","depends_on_id":"mise-chf","type":"blocks","created_at":"2026-01-23T07:26:19.487758Z","created_by":"spm1001"},{"issue_id":"mise-jvz","depends_on_id":"mise-356","type":"blocks","created_at":"2026-01-23T07:26:19.568328Z","created_by":"spm1001"},{"issue_id":"mise-jvz","depends_on_id":"mise-nfh","type":"blocks","created_at":"2026-01-23T07:26:19.649579Z","created_by":"spm1001"},{"issue_id":"mise-jvz","depends_on_id":"mise-2bl","type":"blocks","created_at":"2026-01-23T07:26:19.732148Z","created_by":"spm1001"}]}
{"id":"mise-mkb","title":"Wire help tool — self-documentation","description":"Self-documentation tool. Returns usage info for the MCP.","design":"## Signature\n\nhelp(topic: str = None) -\u003e str\n\n## Topics\n\n- None → overview of all verbs\n- \"search\" → search usage and examples\n- \"fetch\" → fetch usage, format routing\n- \"create\" → create usage\n- \"formats\" → what formats are supported\n\n## Acceptance Criteria\n\n- [ ] Default help is concise overview\n- [ ] Topic-specific help exists for each verb\n- [ ] Examples included","status":"closed","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:25:30.899606Z","created_by":"spm1001","updated_at":"2026-01-23T07:43:25.311309Z","closed_at":"2026-01-23T07:43:25.311309Z","close_reason":"Superseded: documentation via MCP Resources instead of help tool. 3 verbs not 4.","dependencies":[{"issue_id":"mise-mkb","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.883329Z","created_by":"spm1001"}]}
{"id":"mise-nfh","title":"Port gmail extractor","description":"Port gmail.py extraction (1126 lines). Signature stripping, HTML→markdown, thread assembly.","design":"## What to Port\n\nFrom v1 tools/gmail.py:\n- Signature stripping (talon library, 0.01ms per message)\n- HTML → markdown (markitdown, NOT Google Docs API)\n- Thread assembly from messages\n- Quoted reply removal\n\n## Key Learning (from V2.md)\n\nHTML→markdown was the bottleneck (10s for 64KB email).\nNow using markitdown: ~100ms. Keep this fix.\n\n## Signature\n\nextract_thread(thread_response: dict, messages: list[dict]) -\u003e str\nextract_message(message_response: dict) -\u003e str\n\n## Acceptance Criteria\n\n- [ ] extractors/gmail.py exists\n- [ ] Signature stripping works\n- [ ] HTML converted via markitdown (fast path)\n- [ ] Unit test with fixture passes","status":"open","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:24:28.743738Z","created_by":"spm1001","updated_at":"2026-01-23T07:24:28.743738Z","dependencies":[{"issue_id":"mise-nfh","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:06.224214Z","created_by":"spm1001"}]}
{"id":"mise-p01","title":"Port sheets.py — prove the pattern","description":"Smallest extractor (138 lines, 1 function). Port to pure function to validate architecture.","design":"## Why sheets.py First\n\n- 138 lines, single function `read_sheets_as_csv()`\n- Clear input → output\n- If this works, docs.py/slides.py/gmail.py follow same pattern\n\n## Porting Steps\n\n1. Copy extraction logic from v1 tools/sheets.py\n2. Remove `get_sheets_service()` call\n3. Change signature: `extract_sheets_csv(sheets_response: dict) -\u003e str`\n4. Write unit test with fixture\n5. Write integration test with real sheet\n\n## Acceptance Criteria\n\n- [ ] extractors/sheets.py exists\n- [ ] Pure function signature\n- [ ] Unit test passes\n- [ ] Integration test passes","status":"tombstone","priority":1,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-20T22:10:34.217867Z","created_by":"spm1001","updated_at":"2026-01-23T07:23:48.772683Z","deleted_at":"2026-01-23T07:23:48.772683Z","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"mise-r0a","title":"Extract V2.md into decisions summary","description":"V2.md is 466 lines of research. Extract key decisions into a digestible table format.","design":"## Target Format\n\n| Topic | Decision | Rationale | Source |\n|-------|----------|-----------|--------|\n| Gmail HTML→MD | markitdown | 100ms vs 10s (Google Docs API) | V2.md Gmail section |\n| PDF extraction | PyMuPDF primary | 35x faster, AGPL acceptable for personal | V2.md PDF section |\n| ... | ... | ... | ... |\n\n## Location\n\nAdd to CLAUDE.md or create docs/DECISIONS.md\n\n## Why\n\nFuture Claude needs decisions quickly, not 466 lines of exploration.","status":"open","priority":3,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:30:15.795777Z","created_by":"spm1001","updated_at":"2026-01-23T07:30:15.795777Z","dependencies":[{"issue_id":"mise-r0a","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:30:20.987895Z","created_by":"spm1001"}]}
{"id":"mise-tld","title":"Wire resources — self-documenting capabilities","description":"MCP resources that expose dynamic API info: import/export formats, quotas, patterns.","design":"## From v1\n\nworkspace://capabilities/drive/import-formats  → What can be imported\nworkspace://capabilities/drive/export-formats  → What can be exported\nworkspace://quotas/drive/storage               → User's storage limits\nworkspace://patterns/...                       → Usage patterns\n\n## Why Useful\n\nClaude can read these to discover what's possible without external docs.\nDynamic = fetched from actual API (about.get), not static.\n\n## Simpler for v2?\n\nCould consolidate into fewer resources:\n- workspace://capabilities → all format info\n- workspace://help/{topic} → patterns + usage\n\nOr just rely on help() tool and skip resources.\n\n## Acceptance Criteria\n\n- [ ] Decide: resources vs expanded help() tool\n- [ ] If resources: wire import/export formats\n- [ ] Dynamic content from API (not static)","status":"open","priority":2,"issue_type":"task","owner":"spm1001@users.noreply.github.com","created_at":"2026-01-23T07:26:49.012371Z","created_by":"spm1001","updated_at":"2026-01-23T07:26:49.012371Z","dependencies":[{"issue_id":"mise-tld","depends_on_id":"mise-52d","type":"parent-child","created_at":"2026-01-23T07:26:54.128785Z","created_by":"spm1001"}]}
